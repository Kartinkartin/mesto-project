(()=>{"use strict";var e=document.querySelector(".page"),t=document.querySelector(".popup.picture"),r=t.querySelector(".popup__picture-description"),n=t.querySelector(".popup__picture");function o(t){t.classList.add("popup_opened"),e.addEventListener("keydown",u)}function c(t){e.removeEventListener("keydown",u),t.classList.remove("popup_opened")}function u(t){if("Escape"===t.key){var r=e.querySelector(".popup_opened");r&&c(r)}}var a=document.querySelector("#card-element").content,i=document.querySelector(".cards__list"),p=document.querySelector(".popup.place"),s=p.querySelector("fieldset.form-popup__input input[name=new-place-name]"),l=p.querySelector("fieldset.form-popup__input input[name=new-place-link]");function d(e,c){var u=a.querySelector(".cards__item").cloneNode(!0),i=u.querySelector(".cards__image"),p=u.querySelector(".cards__button-like"),s=u.querySelector(".cards__button-delete");return i.src=c,i.alt=e,u.querySelector(".cards__title").textContent=e,i.addEventListener("click",(function(u){var a,i;a=e,i=c,r.textContent=a,n.setAttribute("src","".concat(i)),n.setAttribute("alt","".concat(a)),o(t),u.stopPropagation()})),p.addEventListener("click",(function(){p.classList.toggle("cards__button-like_active")})),s.addEventListener("click",(function(){s.closest("li").remove()})),u}var f=document.querySelector(".page");function m(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(r.buttonDisabledClass),t.removeAttribute("disabled")):(t.setAttribute("disabled","disabled"),t.classList.add(r.buttonDisabledClass))}var _,v=document.querySelector(".profile__name"),y=document.querySelector(".profile__role"),b=document.querySelector(".popup.profile"),q=b.querySelector("fieldset.form-popup__input input[name=name]"),S=b.querySelector("fieldset.form-popup__input input[name=role]"),k=document.querySelector(".profile__button-edit"),L=document.querySelector(".profile__button-plus"),g=document.querySelector(".popup.place"),E=document.querySelectorAll(".popup__button-close");k.addEventListener("click",(function(e){o(b),q.value=v.textContent,S.value=y.textContent,e.stopPropagation()})),E.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return c(t)}))})),document.addEventListener("click",(function(e){!function(e){var t=document.querySelector(".popup_opened");t&&!e.path.some((function(e,t,r){return t<r.length-4&&e.classList.contains("popup__container")}))&&c(t)}(e)})),b.addEventListener("submit",(function(e){e.preventDefault();var t=q.value,r=S.value;v.textContent=t,y.textContent=r,c(b)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t,r;t=e.name,r=e.link,i.append(d(t,r))})),L.addEventListener("click",(function(e){o(g),e.stopPropagation()})),g.addEventListener("submit",(function(e){e.preventDefault();var t,r,n=s.value,o=l.value,u=e.target.querySelector(".form-popup__button");t=n,r=o,i.prepend(d(t,r)),c(p),e.target.reset(),u.setAttribute("disabled","disabled"),u.classList.add("form-popup__button_inactive")})),_={form:".form-popup",fieldset:".form-popup__input",input:".form-popup__item",button:".form-popup__button",buttonDisabledClass:"form-popup__button_inactive",inputErrorClass:"form-popup__item_type_error",errorMessageClass:"form-popup__item-error_active"},Array.from(f.querySelectorAll(_.form)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e.querySelectorAll(_.fieldset)).forEach((function(e){!function(e,t){var r=Array.from(e.querySelectorAll(t.input)),n=e.querySelector(t.button);m(r,n,t),r.forEach((function(o){o.addEventListener("input",(function(){!function(e,t,r){t.validity.valid||function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),o.textContent=r,o.classList.add(n.errorMessageClass)}(e,t,t.validationMessage,r),t.validity.valid&&function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),n.classList.remove(r.errorMessageClass),n.textContent=""}(e,t,r)}(e,o,t),m(r,n,t)}))}))}(e,_)}))}))})();